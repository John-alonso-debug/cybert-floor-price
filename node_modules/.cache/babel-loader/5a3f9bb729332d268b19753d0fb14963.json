{"ast":null,"code":"import * as ethUtil from \"ethereumjs-util\";\nimport supportedChains from \"./chains\";\nimport { apiGetGasPrices, apiGetAccountNonce } from \"./api\";\nimport { convertAmountToRawNumber, convertStringToHex } from \"./bignumber\";\nexport function capitalize(string) {\n  return string.split(\" \").map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(\" \");\n}\nexport function ellipseText(text = \"\", maxLength = 9999) {\n  if (text.length <= maxLength) {\n    return text;\n  }\n\n  const _maxLength = maxLength - 3;\n\n  let ellipse = false;\n  let currentLength = 0;\n  const result = text.split(\" \").filter(word => {\n    currentLength += word.length;\n\n    if (ellipse || currentLength >= _maxLength) {\n      ellipse = true;\n      return false;\n    } else {\n      return true;\n    }\n  }).join(\" \") + \"...\";\n  return result;\n}\nexport function ellipseAddress(address = \"\", width = 10) {\n  return `${address.slice(0, width)}...${address.slice(-width)}`;\n}\nexport function padLeft(n, width, z) {\n  z = z || \"0\";\n  n = n + \"\";\n  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n}\nexport function sanitizeHex(hex) {\n  hex = hex.substring(0, 2) === \"0x\" ? hex.substring(2) : hex;\n\n  if (hex === \"\") {\n    return \"\";\n  }\n\n  hex = hex.length % 2 !== 0 ? \"0\" + hex : hex;\n  return \"0x\" + hex;\n}\nexport function removeHexPrefix(hex) {\n  return hex.toLowerCase().replace(\"0x\", \"\");\n}\nexport function getDataString(func, arrVals) {\n  let val = \"\";\n\n  for (let i = 0; i < arrVals.length; i++) {\n    val += padLeft(arrVals[i], 64);\n  }\n\n  const data = func + val;\n  return data;\n}\nexport function isMobile() {\n  let mobile = false;\n\n  function hasTouchEvent() {\n    try {\n      document.createEvent(\"TouchEvent\");\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function hasMobileUserAgent() {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.substr(0, 4))) {\n      return true;\n    } else if (hasTouchEvent()) {\n      return true;\n    }\n\n    return false;\n  }\n\n  mobile = hasMobileUserAgent();\n  return mobile;\n}\nexport function getChainData(chainId) {\n  const chainData = supportedChains.filter(chain => chain.chain_id === chainId)[0];\n\n  if (!chainData) {\n    throw new Error(\"ChainId missing or not supported\");\n  }\n\n  const API_KEY = process.env.REACT_APP_INFURA_ID;\n\n  if (chainData.rpc_url.includes(\"infura.io\") && chainData.rpc_url.includes(\"%API_KEY%\") && API_KEY) {\n    const rpcUrl = chainData.rpc_url.replace(\"%API_KEY%\", API_KEY);\n    return { ...chainData,\n      rpc_url: rpcUrl\n    };\n  }\n\n  return chainData;\n}\nexport function hashPersonalMessage(msg) {\n  const buffer = Buffer.from(msg);\n  const result = ethUtil.hashPersonalMessage(buffer);\n  const hash = ethUtil.bufferToHex(result);\n  return hash;\n}\nexport function recoverPublicKey(sig, hash) {\n  const sigParams = ethUtil.fromRpcSig(sig);\n  const hashBuffer = Buffer.from(hash.replace(\"0x\", \"\"), \"hex\");\n  const result = ethUtil.ecrecover(hashBuffer, sigParams.v, sigParams.r, sigParams.s);\n  const signer = ethUtil.bufferToHex(ethUtil.publicToAddress(result));\n  return signer;\n}\nexport function recoverPersonalSignature(sig, msg) {\n  const hash = hashPersonalMessage(msg);\n  const signer = recoverPublicKey(sig, hash);\n  return signer;\n}\nexport async function formatTestTransaction(address, chainId) {\n  // from\n  const from = address; // to\n\n  const to = address; // nonce\n\n  const _nonce = await apiGetAccountNonce(address, chainId);\n\n  const nonce = sanitizeHex(convertStringToHex(_nonce)); // gasPrice\n\n  const gasPrices = await apiGetGasPrices();\n  const _gasPrice = gasPrices.slow.price;\n  const gasPrice = sanitizeHex(convertStringToHex(convertAmountToRawNumber(_gasPrice, 9))); // gasLimit\n\n  const _gasLimit = 21000;\n  const gasLimit = sanitizeHex(convertStringToHex(_gasLimit)); // value\n\n  const _value = 0;\n  const value = sanitizeHex(convertStringToHex(_value)); // data\n\n  const data = \"0x\"; // test transaction\n\n  const tx = {\n    from,\n    to,\n    nonce,\n    gasPrice,\n    gasLimit,\n    value,\n    data\n  };\n  return tx;\n}\nexport function isObject(obj) {\n  return typeof obj === \"object\" && !!Object.keys(obj).length;\n}","map":{"version":3,"sources":["/Users/helen/cybert/floor-price-front/frontend/src/helpers/utilities.ts"],"names":["ethUtil","supportedChains","apiGetGasPrices","apiGetAccountNonce","convertAmountToRawNumber","convertStringToHex","capitalize","string","split","map","word","charAt","toUpperCase","slice","toLowerCase","join","ellipseText","text","maxLength","length","_maxLength","ellipse","currentLength","result","filter","ellipseAddress","address","width","padLeft","n","z","Array","sanitizeHex","hex","substring","removeHexPrefix","replace","getDataString","func","arrVals","val","i","data","isMobile","mobile","hasTouchEvent","document","createEvent","e","hasMobileUserAgent","test","navigator","userAgent","substr","getChainData","chainId","chainData","chain","chain_id","Error","API_KEY","process","env","REACT_APP_INFURA_ID","rpc_url","includes","rpcUrl","hashPersonalMessage","msg","buffer","Buffer","from","hash","bufferToHex","recoverPublicKey","sig","sigParams","fromRpcSig","hashBuffer","ecrecover","v","r","s","signer","publicToAddress","recoverPersonalSignature","formatTestTransaction","to","_nonce","nonce","gasPrices","_gasPrice","slow","price","gasPrice","_gasLimit","gasLimit","_value","value","tx","isObject","obj","Object","keys"],"mappings":"AAAA,OAAO,KAAKA,OAAZ,MAAyB,iBAAzB;AAEA,OAAOC,eAAP,MAA4B,UAA5B;AACA,SAASC,eAAT,EAA0BC,kBAA1B,QAAoD,OAApD;AACA,SAASC,wBAAT,EAAmCC,kBAAnC,QAA6D,aAA7D;AAEA,OAAO,SAASC,UAAT,CAAoBC,MAApB,EAA4C;AACjD,SAAOA,MAAM,CACVC,KADI,CACE,GADF,EAEJC,GAFI,CAEAC,IAAI,IAAIA,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,WAAf,KAA+BF,IAAI,CAACG,KAAL,CAAW,CAAX,EAAcC,WAAd,EAFvC,EAGJC,IAHI,CAGC,GAHD,CAAP;AAID;AAED,OAAO,SAASC,WAAT,CACLC,IAAY,GAAG,EADV,EAELC,SAAiB,GAAG,IAFf,EAGG;AACR,MAAID,IAAI,CAACE,MAAL,IAAeD,SAAnB,EAA8B;AAC5B,WAAOD,IAAP;AACD;;AACD,QAAMG,UAAU,GAAGF,SAAS,GAAG,CAA/B;;AACA,MAAIG,OAAO,GAAG,KAAd;AACA,MAAIC,aAAa,GAAG,CAApB;AACA,QAAMC,MAAM,GACVN,IAAI,CACDT,KADH,CACS,GADT,EAEGgB,MAFH,CAEUd,IAAI,IAAI;AACdY,IAAAA,aAAa,IAAIZ,IAAI,CAACS,MAAtB;;AACA,QAAIE,OAAO,IAAIC,aAAa,IAAIF,UAAhC,EAA4C;AAC1CC,MAAAA,OAAO,GAAG,IAAV;AACA,aAAO,KAAP;AACD,KAHD,MAGO;AACL,aAAO,IAAP;AACD;AACF,GAVH,EAWGN,IAXH,CAWQ,GAXR,IAWe,KAZjB;AAaA,SAAOQ,MAAP;AACD;AAED,OAAO,SAASE,cAAT,CACLC,OAAe,GAAG,EADb,EAELC,KAAa,GAAG,EAFX,EAGG;AACR,SAAQ,GAAED,OAAO,CAACb,KAAR,CAAc,CAAd,EAAiBc,KAAjB,CAAwB,MAAKD,OAAO,CAACb,KAAR,CAAc,CAACc,KAAf,CAAsB,EAA7D;AACD;AAED,OAAO,SAASC,OAAT,CAAiBC,CAAjB,EAA4BF,KAA5B,EAA2CG,CAA3C,EAA+D;AACpEA,EAAAA,CAAC,GAAGA,CAAC,IAAI,GAAT;AACAD,EAAAA,CAAC,GAAGA,CAAC,GAAG,EAAR;AACA,SAAOA,CAAC,CAACV,MAAF,IAAYQ,KAAZ,GAAoBE,CAApB,GAAwB,IAAIE,KAAJ,CAAUJ,KAAK,GAAGE,CAAC,CAACV,MAAV,GAAmB,CAA7B,EAAgCJ,IAAhC,CAAqCe,CAArC,IAA0CD,CAAzE;AACD;AAED,OAAO,SAASG,WAAT,CAAqBC,GAArB,EAA0C;AAC/CA,EAAAA,GAAG,GAAGA,GAAG,CAACC,SAAJ,CAAc,CAAd,EAAiB,CAAjB,MAAwB,IAAxB,GAA+BD,GAAG,CAACC,SAAJ,CAAc,CAAd,CAA/B,GAAkDD,GAAxD;;AACA,MAAIA,GAAG,KAAK,EAAZ,EAAgB;AACd,WAAO,EAAP;AACD;;AACDA,EAAAA,GAAG,GAAGA,GAAG,CAACd,MAAJ,GAAa,CAAb,KAAmB,CAAnB,GAAuB,MAAMc,GAA7B,GAAmCA,GAAzC;AACA,SAAO,OAAOA,GAAd;AACD;AAED,OAAO,SAASE,eAAT,CAAyBF,GAAzB,EAA8C;AACnD,SAAOA,GAAG,CAACnB,WAAJ,GAAkBsB,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,CAAP;AACD;AAED,OAAO,SAASC,aAAT,CAAuBC,IAAvB,EAAqCC,OAArC,EAA6D;AAClE,MAAIC,GAAG,GAAG,EAAV;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACpB,MAA5B,EAAoCsB,CAAC,EAArC,EAAyC;AACvCD,IAAAA,GAAG,IAAIZ,OAAO,CAACW,OAAO,CAACE,CAAD,CAAR,EAAa,EAAb,CAAd;AACD;;AACD,QAAMC,IAAI,GAAGJ,IAAI,GAAGE,GAApB;AACA,SAAOE,IAAP;AACD;AAED,OAAO,SAASC,QAAT,GAA6B;AAClC,MAAIC,MAAe,GAAG,KAAtB;;AAEA,WAASC,aAAT,GAAkC;AAChC,QAAI;AACFC,MAAAA,QAAQ,CAACC,WAAT,CAAqB,YAArB;AACA,aAAO,IAAP;AACD,KAHD,CAGE,OAAOC,CAAP,EAAU;AACV,aAAO,KAAP;AACD;AACF;;AAED,WAASC,kBAAT,GAAuC;AACrC,QACE,qUAAqUC,IAArU,CACEC,SAAS,CAACC,SADZ,KAGA,0hDAA0hDF,IAA1hD,CACEC,SAAS,CAACC,SAAV,CAAoBC,MAApB,CAA2B,CAA3B,EAA8B,CAA9B,CADF,CAJF,EAOE;AACA,aAAO,IAAP;AACD,KATD,MASO,IAAIR,aAAa,EAAjB,EAAqB;AAC1B,aAAO,IAAP;AACD;;AACD,WAAO,KAAP;AACD;;AAEDD,EAAAA,MAAM,GAAGK,kBAAkB,EAA3B;AAEA,SAAOL,MAAP;AACD;AAED,OAAO,SAASU,YAAT,CAAsBC,OAAtB,EAAmD;AACxD,QAAMC,SAAS,GAAGvD,eAAe,CAACuB,MAAhB,CACfiC,KAAD,IAAgBA,KAAK,CAACC,QAAN,KAAmBH,OADnB,EAEhB,CAFgB,CAAlB;;AAIA,MAAI,CAACC,SAAL,EAAgB;AACd,UAAM,IAAIG,KAAJ,CAAU,kCAAV,CAAN;AACD;;AAED,QAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,mBAA5B;;AAEA,MACEP,SAAS,CAACQ,OAAV,CAAkBC,QAAlB,CAA2B,WAA3B,KACAT,SAAS,CAACQ,OAAV,CAAkBC,QAAlB,CAA2B,WAA3B,CADA,IAEAL,OAHF,EAIE;AACA,UAAMM,MAAM,GAAGV,SAAS,CAACQ,OAAV,CAAkB5B,OAAlB,CAA0B,WAA1B,EAAuCwB,OAAvC,CAAf;AAEA,WAAO,EACL,GAAGJ,SADE;AAELQ,MAAAA,OAAO,EAAEE;AAFJ,KAAP;AAID;;AAED,SAAOV,SAAP;AACD;AAED,OAAO,SAASW,mBAAT,CAA6BC,GAA7B,EAAkD;AACvD,QAAMC,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAYH,GAAZ,CAAf;AACA,QAAM7C,MAAM,GAAGvB,OAAO,CAACmE,mBAAR,CAA4BE,MAA5B,CAAf;AACA,QAAMG,IAAI,GAAGxE,OAAO,CAACyE,WAAR,CAAoBlD,MAApB,CAAb;AACA,SAAOiD,IAAP;AACD;AAED,OAAO,SAASE,gBAAT,CAA0BC,GAA1B,EAAuCH,IAAvC,EAA6D;AAClE,QAAMI,SAAS,GAAG5E,OAAO,CAAC6E,UAAR,CAAmBF,GAAnB,CAAlB;AACA,QAAMG,UAAU,GAAGR,MAAM,CAACC,IAAP,CAAYC,IAAI,CAACpC,OAAL,CAAa,IAAb,EAAmB,EAAnB,CAAZ,EAAoC,KAApC,CAAnB;AACA,QAAMb,MAAM,GAAGvB,OAAO,CAAC+E,SAAR,CACbD,UADa,EAEbF,SAAS,CAACI,CAFG,EAGbJ,SAAS,CAACK,CAHG,EAIbL,SAAS,CAACM,CAJG,CAAf;AAMA,QAAMC,MAAM,GAAGnF,OAAO,CAACyE,WAAR,CAAoBzE,OAAO,CAACoF,eAAR,CAAwB7D,MAAxB,CAApB,CAAf;AACA,SAAO4D,MAAP;AACD;AAED,OAAO,SAASE,wBAAT,CAAkCV,GAAlC,EAA+CP,GAA/C,EAAoE;AACzE,QAAMI,IAAI,GAAGL,mBAAmB,CAACC,GAAD,CAAhC;AACA,QAAMe,MAAM,GAAGT,gBAAgB,CAACC,GAAD,EAAMH,IAAN,CAA/B;AACA,SAAOW,MAAP;AACD;AAED,OAAO,eAAeG,qBAAf,CAAqC5D,OAArC,EAAsD6B,OAAtD,EAAuE;AAC5E;AACA,QAAMgB,IAAI,GAAG7C,OAAb,CAF4E,CAI5E;;AACA,QAAM6D,EAAE,GAAG7D,OAAX,CAL4E,CAO5E;;AACA,QAAM8D,MAAM,GAAG,MAAMrF,kBAAkB,CAACuB,OAAD,EAAU6B,OAAV,CAAvC;;AACA,QAAMkC,KAAK,GAAGzD,WAAW,CAAC3B,kBAAkB,CAACmF,MAAD,CAAnB,CAAzB,CAT4E,CAW5E;;AACA,QAAME,SAAS,GAAG,MAAMxF,eAAe,EAAvC;AACA,QAAMyF,SAAS,GAAGD,SAAS,CAACE,IAAV,CAAeC,KAAjC;AACA,QAAMC,QAAQ,GAAG9D,WAAW,CAC1B3B,kBAAkB,CAACD,wBAAwB,CAACuF,SAAD,EAAY,CAAZ,CAAzB,CADQ,CAA5B,CAd4E,CAkB5E;;AACA,QAAMI,SAAS,GAAG,KAAlB;AACA,QAAMC,QAAQ,GAAGhE,WAAW,CAAC3B,kBAAkB,CAAC0F,SAAD,CAAnB,CAA5B,CApB4E,CAsB5E;;AACA,QAAME,MAAM,GAAG,CAAf;AACA,QAAMC,KAAK,GAAGlE,WAAW,CAAC3B,kBAAkB,CAAC4F,MAAD,CAAnB,CAAzB,CAxB4E,CA0B5E;;AACA,QAAMvD,IAAI,GAAG,IAAb,CA3B4E,CA6B5E;;AACA,QAAMyD,EAAE,GAAG;AACT5B,IAAAA,IADS;AAETgB,IAAAA,EAFS;AAGTE,IAAAA,KAHS;AAITK,IAAAA,QAJS;AAKTE,IAAAA,QALS;AAMTE,IAAAA,KANS;AAOTxD,IAAAA;AAPS,GAAX;AAUA,SAAOyD,EAAP;AACD;AAED,OAAO,SAASC,QAAT,CAAkBC,GAAlB,EAAqC;AAC1C,SAAO,OAAOA,GAAP,KAAe,QAAf,IAA2B,CAAC,CAACC,MAAM,CAACC,IAAP,CAAYF,GAAZ,EAAiBlF,MAArD;AACD","sourcesContent":["import * as ethUtil from \"ethereumjs-util\";\nimport { IChainData } from \"./types\";\nimport supportedChains from \"./chains\";\nimport { apiGetGasPrices, apiGetAccountNonce } from \"./api\";\nimport { convertAmountToRawNumber, convertStringToHex } from \"./bignumber\";\n\nexport function capitalize(string: string): string {\n  return string\n    .split(\" \")\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n    .join(\" \");\n}\n\nexport function ellipseText(\n  text: string = \"\",\n  maxLength: number = 9999\n): string {\n  if (text.length <= maxLength) {\n    return text;\n  }\n  const _maxLength = maxLength - 3;\n  let ellipse = false;\n  let currentLength = 0;\n  const result =\n    text\n      .split(\" \")\n      .filter(word => {\n        currentLength += word.length;\n        if (ellipse || currentLength >= _maxLength) {\n          ellipse = true;\n          return false;\n        } else {\n          return true;\n        }\n      })\n      .join(\" \") + \"...\";\n  return result;\n}\n\nexport function ellipseAddress(\n  address: string = \"\",\n  width: number = 10\n): string {\n  return `${address.slice(0, width)}...${address.slice(-width)}`;\n}\n\nexport function padLeft(n: string, width: number, z?: string): string {\n  z = z || \"0\";\n  n = n + \"\";\n  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n}\n\nexport function sanitizeHex(hex: string): string {\n  hex = hex.substring(0, 2) === \"0x\" ? hex.substring(2) : hex;\n  if (hex === \"\") {\n    return \"\";\n  }\n  hex = hex.length % 2 !== 0 ? \"0\" + hex : hex;\n  return \"0x\" + hex;\n}\n\nexport function removeHexPrefix(hex: string): string {\n  return hex.toLowerCase().replace(\"0x\", \"\");\n}\n\nexport function getDataString(func: string, arrVals: any[]): string {\n  let val = \"\";\n  for (let i = 0; i < arrVals.length; i++) {\n    val += padLeft(arrVals[i], 64);\n  }\n  const data = func + val;\n  return data;\n}\n\nexport function isMobile(): boolean {\n  let mobile: boolean = false;\n\n  function hasTouchEvent(): boolean {\n    try {\n      document.createEvent(\"TouchEvent\");\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function hasMobileUserAgent(): boolean {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(\n        navigator.userAgent\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\n        navigator.userAgent.substr(0, 4)\n      )\n    ) {\n      return true;\n    } else if (hasTouchEvent()) {\n      return true;\n    }\n    return false;\n  }\n\n  mobile = hasMobileUserAgent();\n\n  return mobile;\n}\n\nexport function getChainData(chainId: number): IChainData {\n  const chainData = supportedChains.filter(\n    (chain: any) => chain.chain_id === chainId\n  )[0];\n\n  if (!chainData) {\n    throw new Error(\"ChainId missing or not supported\");\n  }\n\n  const API_KEY = process.env.REACT_APP_INFURA_ID;\n\n  if (\n    chainData.rpc_url.includes(\"infura.io\") &&\n    chainData.rpc_url.includes(\"%API_KEY%\") &&\n    API_KEY\n  ) {\n    const rpcUrl = chainData.rpc_url.replace(\"%API_KEY%\", API_KEY);\n\n    return {\n      ...chainData,\n      rpc_url: rpcUrl\n    };\n  }\n\n  return chainData;\n}\n\nexport function hashPersonalMessage(msg: string): string {\n  const buffer = Buffer.from(msg);\n  const result = ethUtil.hashPersonalMessage(buffer);\n  const hash = ethUtil.bufferToHex(result);\n  return hash;\n}\n\nexport function recoverPublicKey(sig: string, hash: string): string {\n  const sigParams = ethUtil.fromRpcSig(sig);\n  const hashBuffer = Buffer.from(hash.replace(\"0x\", \"\"), \"hex\");\n  const result = ethUtil.ecrecover(\n    hashBuffer,\n    sigParams.v,\n    sigParams.r,\n    sigParams.s\n  );\n  const signer = ethUtil.bufferToHex(ethUtil.publicToAddress(result));\n  return signer;\n}\n\nexport function recoverPersonalSignature(sig: string, msg: string): string {\n  const hash = hashPersonalMessage(msg);\n  const signer = recoverPublicKey(sig, hash);\n  return signer;\n}\n\nexport async function formatTestTransaction(address: string, chainId: number) {\n  // from\n  const from = address;\n\n  // to\n  const to = address;\n\n  // nonce\n  const _nonce = await apiGetAccountNonce(address, chainId);\n  const nonce = sanitizeHex(convertStringToHex(_nonce));\n\n  // gasPrice\n  const gasPrices = await apiGetGasPrices();\n  const _gasPrice = gasPrices.slow.price;\n  const gasPrice = sanitizeHex(\n    convertStringToHex(convertAmountToRawNumber(_gasPrice, 9))\n  );\n\n  // gasLimit\n  const _gasLimit = 21000;\n  const gasLimit = sanitizeHex(convertStringToHex(_gasLimit));\n\n  // value\n  const _value = 0;\n  const value = sanitizeHex(convertStringToHex(_value));\n\n  // data\n  const data = \"0x\";\n\n  // test transaction\n  const tx = {\n    from,\n    to,\n    nonce,\n    gasPrice,\n    gasLimit,\n    value,\n    data\n  };\n\n  return tx;\n}\n\nexport function isObject(obj: any): boolean {\n  return typeof obj === \"object\" && !!Object.keys(obj).length;\n}\n"]},"metadata":{},"sourceType":"module"}