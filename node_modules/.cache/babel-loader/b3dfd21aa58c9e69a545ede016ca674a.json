{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar subprovider_1 = __importDefault(require(\"../subprovider\"));\n\nvar eth_util_1 = require(\"../util/eth-util\");\n\nvar SanitizerSubprovider =\n/** @class */\nfunction (_super) {\n  __extends(SanitizerSubprovider, _super);\n\n  function SanitizerSubprovider() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SanitizerSubprovider.prototype.handleRequest = function (payload, next, end) {\n    var txParams = payload.params[0];\n\n    if (typeof txParams === 'object' && !Array.isArray(txParams)) {\n      var sanitized = cloneTxParams(txParams);\n      payload.params[0] = sanitized;\n    }\n\n    next();\n  };\n\n  return SanitizerSubprovider;\n}(subprovider_1.default);\n\nexports.default = SanitizerSubprovider; // we use this to clean any custom params from the txParams\n\nvar permitted = ['from', 'to', 'value', 'data', 'gas', 'gasPrice', 'nonce', 'fromBlock', 'toBlock', 'address', 'topics'];\n\nfunction cloneTxParams(txParams) {\n  var sanitized = permitted.reduce(function (copy, p) {\n    if (p in txParams) {\n      if (Array.isArray(txParams[p])) {\n        copy[p] = txParams[p].map(function (item) {\n          return sanitize(item);\n        });\n      } else {\n        copy[p] = sanitize(txParams[p]);\n      }\n    }\n\n    return copy;\n  }, {});\n  return sanitized;\n}\n\nfunction sanitize(value) {\n  switch (value) {\n    case 'latest':\n      return value;\n\n    case 'pending':\n      return value;\n\n    case 'earliest':\n      return value;\n\n    default:\n      if (typeof value === 'string') {\n        return eth_util_1.addHexPrefix(value.toLowerCase());\n      } else {\n        return value;\n      }\n\n  }\n}","map":{"version":3,"sources":["/Users/helen/fi/protocol-demo/frontend/node_modules/@bitski/provider-engine/dist/subproviders/sanitizer.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__importDefault","mod","__esModule","defineProperty","exports","value","subprovider_1","require","eth_util_1","SanitizerSubprovider","_super","apply","arguments","handleRequest","payload","next","end","txParams","params","isArray","sanitized","cloneTxParams","default","permitted","reduce","copy","map","item","sanitize","addHexPrefix","toLowerCase"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar subprovider_1 = __importDefault(require(\"../subprovider\"));\nvar eth_util_1 = require(\"../util/eth-util\");\nvar SanitizerSubprovider = /** @class */ (function (_super) {\n    __extends(SanitizerSubprovider, _super);\n    function SanitizerSubprovider() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SanitizerSubprovider.prototype.handleRequest = function (payload, next, end) {\n        var txParams = payload.params[0];\n        if (typeof txParams === 'object' && !Array.isArray(txParams)) {\n            var sanitized = cloneTxParams(txParams);\n            payload.params[0] = sanitized;\n        }\n        next();\n    };\n    return SanitizerSubprovider;\n}(subprovider_1.default));\nexports.default = SanitizerSubprovider;\n// we use this to clean any custom params from the txParams\nvar permitted = [\n    'from',\n    'to',\n    'value',\n    'data',\n    'gas',\n    'gasPrice',\n    'nonce',\n    'fromBlock',\n    'toBlock',\n    'address',\n    'topics',\n];\nfunction cloneTxParams(txParams) {\n    var sanitized = permitted.reduce(function (copy, p) {\n        if (p in txParams) {\n            if (Array.isArray(txParams[p])) {\n                copy[p] = txParams[p].map(function (item) { return sanitize(item); });\n            }\n            else {\n                copy[p] = sanitize(txParams[p]);\n            }\n        }\n        return copy;\n    }, {});\n    return sanitized;\n}\nfunction sanitize(value) {\n    switch (value) {\n        case 'latest':\n            return value;\n        case 'pending':\n            return value;\n        case 'earliest':\n            return value;\n        default:\n            if (typeof value === 'string') {\n                return eth_util_1.addHexPrefix(value.toLowerCase());\n            }\n            else {\n                return value;\n            }\n    }\n}\n"]},"metadata":{},"sourceType":"script"}